{% load static %}
<!doctype html>
<html lang="en" class="dark-theme">


<!-- Mirrored from codervent.com/syndron/demo/vertical/app-chat-box.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Jul 2023 03:55:08 GMT -->
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--favicon-->
	<link rel="icon" href="https://bluestreammarketing.com.co/wp-content/uploads/2022/12/favicon-150x150.png" sizes="32x32">
	<!--plugins-->
	<link href="{% static 'assets/plugins/simplebar/css/simplebar.css' %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/dark-theme.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/semi-dark.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/header-colors.css" %}" />
	<title>SMS Blue</title>
</head>

<body>
	<!--wrapper-->
	<div class="wrapper">
		<!--sidebar wrapper -->
		<div class="sidebar-wrapper" data-simplebar="true">
			<div class="sidebar-header">
				<div>
					<img src="https://bluestreammarketing.com.co/wp-content/uploads/2022/12/favicon-150x150.png" class="logo-icon" alt="logo icon">
				</div>
				<div>
					<h4 class="logo-text">SMS Blue</h4>
				</div>
				<div class="toggle-icon ms-auto"><i class='bx bx-arrow-back'></i>
				</div>
			 </div>
			<!--navigation-->
			<ul class="metismenu" id="menu">
				<li>
					<a href="javascript:;" class="has-arrow">
						<div class="parent-icon"><i class='bx bx-home-alt'></i>
						</div>
						<div class="menu-title">Dashboard</div>
					</a>
					<ul>
						<li> <a href="#"><i class='bx bx-radio-circle'></i>eCommerce</a>
						</li>
						<li> <a href="#"><i class='bx bx-radio-circle'></i>Analytics</a>
						</li>
					</ul>
				</li>
				<li>
					<a href="javascript:;" class="has-arrow">
						<div class="parent-icon"><i class="bx bx-category"></i>
						</div>
						<div class="menu-title">Application</div>
					</a>
					<ul>
						<li> <a href="{% url 'index' %}"><i class='bx bx-radio-circle'></i>SMS Blue</a>
						</li>
					</ul>
				</li>
			</ul>
			<!--end navigation-->
		</div>
		<!--end sidebar wrapper -->
		<!--start header -->
		<header>
			<div class="topbar d-flex align-items-center">
				<nav class="navbar navbar-expand gap-3">
					<div class="mobile-toggle-menu"><i class='bx bx-menu'></i>
					</div>
					<div class="top-menu ms-auto">
						<ul class="navbar-nav align-items-center gap-1">
							<li class="nav-item dark-mode d-none d-sm-flex">
								<a class="nav-link dark-mode-icon" href="javascript:;"><i class='bx bx-moon'></i>
								</a>
							</li>
							<li class="nav-item dropdown dropdown-app">
								<div class="dropdown-menu dropdown-menu-end p-0">
									<div class="app-container p-2 my-2">
									  <div class="row gx-0 gy-2 row-cols-3 justify-content-center p-2">	</div>				
									</div>
								</div>
							</li>
							<li class="nav-item dropdown dropdown-large">								
								<div class="dropdown-menu dropdown-menu-end">
									<div class="header-notifications-list">	</div>									
								</div>
							</li>
							<li class="nav-item dropdown dropdown-large">
								<div class="dropdown-menu dropdown-menu-end">
									<div class="header-message-list">	</div>
								</div>
							</li>
						</ul>
					</div>
					<div class="user-box dropdown px-3">
						<a class="d-flex align-items-center nav-link dropdown-toggle gap-3 dropdown-toggle-nocaret" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<i class="bx bx-user fs-5"></i>
							<div class="user-info">
								<p class="user-name mb-0">{{request.user}}</p>
								<p class="designattion mb-0">{{request.user.role}}</p>
							</div>
						</a>
						<ul class="dropdown-menu dropdown-menu-end">
							<li><a class="dropdown-item d-flex align-items-center" href="javascript:;"><i class="bx bx-home-circle fs-5"></i><span>Dashboard</span></a>
							</li>
							<li>
								<div class="dropdown-divider mb-0"></div>
							</li>
							<li><a class="dropdown-item d-flex align-items-center" href="{% url 'logout' %}"><i class="bx bx-log-out-circle"></i><span>Logout</span></a>
							</li>
						</ul>
					</div>
				</nav>
			</div>
		</header>
		<!--end header -->
		<!--start page wrapper -->
		<div class="page-wrapper">
			<div class="page-content">
				<div class="chat-wrapper">
					<div class="chat-sidebar">
						<div class="chat-sidebar-header">
							<div class="d-flex align-items-center">
								<div class="chat-user-online">
									<img src="{% static "assets/images/avatars/avatar-1.png" %}" width="45" height="45" class="rounded-circle" alt="" />
								</div>
								<div class="flex-grow-1 ms-2">
									<p class="mb-0">{{request.user.first_name}} {{request.user.last_name}}</p>
								</div>
								<div class="dropdown">
									<div class="cursor-pointer font-24 dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown"><i class='bx bx-dots-horizontal-rounded'></i>
									</div>
									<div class="dropdown-menu dropdown-menu-end">
										<a class="dropdown-item" href="{% url 'logout' %}">Sign Out</a>
									</div>
								</div>
							</div>
							<div class="mb-3"></div>
							<div class="input-group input-group-sm"> <span class="input-group-text bg-transparent"><i class='bx bx-search'></i></span>
								<input id='searchInput' type="text" class="form-control" placeholder="People & messages">
							</div>
							<div class="chat-tab-menu mt-3">
								<ul class="nav nav-pills nav-justified">
									<li class="nav-item">
										<a class="nav-link active" data-bs-toggle="pill" href="javascript:;">
											<div class="font-24"><i class='bx bx-conversation'></i>
											</div>
											<div><small>Chats</small>
											</div>
										</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-bs-toggle="pill" href="javascript:;">
											<div class="font-24"><i class='bx bxs-contact'></i>
											</div>
											<div><small>Contacts</small>
											</div>
										</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-bs-toggle="pill" href="javascript:;">
											<div class="font-24"><i class='bx bx-bell'></i>
											</div>
											<div><small>Notifications</small>
											</div>
										</a>
									</li>
								</ul>
							</div>
						</div>
						<div class="chat-sidebar-content">
							<div class="tab-content" id="pills-tabContent">
								<div class="tab-pane fade show active" id="pills-Chats">
									<div class="p-3">
										<div class="meeting-button d-flex justify-content-between">
											<div class="dropdown"> <a href="#" class="btn btn-white btn-sm radius-30 dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown" data-display="static"><i class='bx bxs-edit me-2'></i>New Chat<i class='bx bxs-chevron-down ms-2'></i></a>
												<div class="dropdown-menu dropdown-menu-right">
													<!-- Button trigger #NewChatModal modal -->
													<button type="button" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#NewChatModal">New Chat</button>
												</div>
											</div>
										</div>
										<div class="dropdown mt-3"> <a href="#" class="text-uppercase text-secondary dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown">Recent Chats <i class='bx bxs-chevron-down'></i></a>
											<div class="dropdown-menu">	
												<a class="dropdown-item" href="#">Recent Chats</a>
												<div class="dropdown-divider"></div>	
												<a class="dropdown-item" href="#">Sort by Time</a>
												<a class="dropdown-item" href="#">Sort by Unread</a>
												<div class="dropdown-divider"></div>	
												<a class="dropdown-item" href="#">Show Favorites</a>
											</div>
										</div>
									</div>
									<div class="chat-list">
										<div class="list-group list-group-flush" id='listChats'>
											{% for chat in chats %}
											<a id='chat{{ chat.client.name|default:chat.client.phone_number }}' href="{% url 'chat' chat.client.phone_number %}" class="list-group-item">
												<div class="d-flex">
													<i class="bx bx-user fs-5"></i>
													<div class="flex-grow-1 ms-2">
														<h6 class="mb-0 chat-title {% if chat.is_message_unread %}fw-bold{% endif %}">{{ chat.client.name|default:chat.client.phone_number }}</h6>
														<p class="mb-0 chat-msg {% if chat.is_message_unread %}fw-bold{% endif %}">
															{{ chat.last_message_content }}
															{% if chat.has_attachment %}
																<i class="bx bx-paperclip"></i>
															{% endif %}
														</p>{% if chat.is_message_unread %}<span class="alert-count">{{ chat.unread_messages }}</span>{% endif %}
													</div>
													{% if chat.last_message_time %}
													<div class="chat-time">
														{{ chat.last_message_time|date:"g:i A" }}
													</div>
													{% endif %}
												</div>
											</a>
											{% endfor %}
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="chat-header d-flex align-items-center">
						<div class="chat-toggle-btn"><i class='bx bx-menu-alt-left'></i>
						</div>
						<div>
							{% if client %}
							<h4 class="mb-1 font-weight-bold">{% if client.name %}{{client.name}} - {{client.phone_number}}{% else %}Unknown - {{client.phone_number}}{%endif%}</h4>
							<div class="list-inline d-sm-flex mb-0 d-none"> <a href="javascript:;" class="list-inline-item d-flex align-items-center text-secondary"><small class='bx bxs-circle me-1 chart-online'></small>Active Now</a>
								<a href="javascript:;" class="list-inline-item d-flex align-items-center text-secondary">|</a>
								<!-- Button trigger #NewChatModal modal -->
								<a type="button" class="list-inline-item d-flex align-items-center text-secondary" data-bs-toggle="modal" data-bs-target="#EditChatModal"><i class='bx bx-edit me-1'></i>Edit Chat</a></a>
								{% if request.user.is_superuser %}
								<a href="javascript:;" class="list-inline-item d-flex align-items-center text-secondary">|</a>
								<a href="{% url "deleteClient" client.id %}" class="list-inline-item d-flex align-items-center text-secondary"><i class='bx bx-trash me-1'></i>Delete Chat</a></a>
								{% endif %}
							</div>
							{% endif %}
						</div>
					</div>
					<div class="chat-content" id="chat-content">
					{% block chatBlock %}
					{% endblock %}
					
					</div>
					<div class="chat-footer d-flex align-items-center">
						<div class="flex-grow-1 pe-2">
							<div class="input-group">
								<textarea id="messageContent" class="form-control" placeholder="Type a message"></textarea>
							</div>
						</div>
						<div class="chat-footer-menu" id="sendMessage">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
								stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send text-primary">
								<line x1="22" y1="2" x2="11" y2="13"></line>
								<polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
							</svg>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal New Chat -->
	<div class="modal fade" id="NewChatModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<form id="newChat" action="" method="post">
					{% csrf_token %}
					<div class="modal-header">
						<h5 class="modal-title">Create New Chat</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<label for="name" class="form-label">Name</label>
						<input type="text" class="form-control mb-3" name="name" id="name" placeholder="Enter the client's name"/>
						<label for="phoneNumber" class="form-label">Phone Number</label>
						<input type="number" class="form-control" name="phoneNumber" id="phoneNumber" placeholder="Example: 17863034781" required/>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary">Create Chat</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<!-- Modal Edit Chat -->
	<div class="modal fade" id="EditChatModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<form id="newChat" action="" method="post">
					{% csrf_token %}
					<div class="modal-header">
						<h5 class="modal-title">Edit Chat</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<label for="name" class="form-label">Name</label>
						<input type="text" class="form-control mb-3" name="name" id="name" placeholder="Enter the client's name" value='{{client.name}}' Required/>
						<input type="hidden" name="phoneNumber" value='{{client.phone_number}}'/>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary">Edit Chat</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
	<script>
		var user_id = '{{request.user.id}}'
		var chat_id = '{{ client.phone_number }}'
	</script>
	<script src="{% static 'js/scripts.js' %}"></script>

	<!-- Bootstrap JS -->
	<script src="{% static "assets/js/bootstrap.bundle.min.js" %}"></script>

	<!--plugins-->
	<script src="{% static "assets/js/jquery.min.js" %}"></script>
	<script src="{% static "assets/plugins/simplebar/js/simplebar.min.js" %}"></script>
	<script src="{% static "assets/plugins/metismenu/js/metisMenu.min.js" %}"></script>
	<script src="{% static "assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js" %}"></script>
	<script>
		new PerfectScrollbar('.chat-list');
		new PerfectScrollbar('.chat-content');
	</script>
	
	<!--app JS-->
	<script src="{% static "assets/js/app.js" %}"></script>

</body>


<!-- Mirrored from codervent.com/syndron/demo/vertical/app-chat-box.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Jul 2023 03:55:10 GMT -->
</html>